<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.1" xml:lang="en-US">
  <compounddef id="main_8cpp" kind="file" language="C++">
    <compoundname>main.cpp</compoundname>
    <includes refid="battery__pub_8h" local="yes">battery_pub.h</includes>
    <includes refid="leak__pub_8h" local="yes">leak_pub.h</includes>
    <includes refid="pressure__pub_8h" local="yes">pressure_pub.h</includes>
    <includes local="no">Servo.h</includes>
    <includes local="no">SoftwareSerial.h</includes>
    <includes local="no">Wire.h</includes>
    <includes local="no">frost_interfaces/msg/u_command.h</includes>
    <incdepgraph>
      <node id="12">
        <label>frost_interfaces/msg/leak_status.h</label>
      </node>
      <node id="11">
        <label>leak_pub.h</label>
        <link refid="leak__pub_8h_source"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>frost_interfaces/msg/battery_status.h</label>
      </node>
      <node id="8">
        <label>rclc/rclc.h</label>
      </node>
      <node id="6">
        <label>rcl/rcl.h</label>
      </node>
      <node id="5">
        <label>micro_ros_platformio.h</label>
      </node>
      <node id="2">
        <label>battery_pub.h</label>
        <link refid="battery__pub_8h_source"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>publisher.h</label>
        <link refid="publisher_8h_source"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="15">
        <label>MS5837.h</label>
      </node>
      <node id="19">
        <label>frost_interfaces/msg/u_command.h</label>
      </node>
      <node id="9">
        <label>Wire.h</label>
      </node>
      <node id="13">
        <label>std_msgs/msg/bool.h</label>
      </node>
      <node id="16">
        <label>sensor_msgs/msg/fluid_pressure.h</label>
      </node>
      <node id="7">
        <label>rclc/executor.h</label>
      </node>
      <node id="17">
        <label>Servo.h</label>
      </node>
      <node id="4">
        <label>Arduino.h</label>
      </node>
      <node id="1">
        <label>/home/frostlab/teensy_ws/cougars/src/main.cpp</label>
        <link refid="main_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
      </node>
      <node id="18">
        <label>SoftwareSerial.h</label>
      </node>
      <node id="14">
        <label>pressure_pub.h</label>
        <link refid="pressure__pub_8h_source"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="main_8cpp_1a942aaee1e0f53df83a7cae110d727ff0" prot="public" static="no">
        <name>ENABLE_SERVOS</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="27" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="27" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ad682458c5f8737f6804982f44b514ad5" prot="public" static="no">
        <name>ENABLE_THRUSTER</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="28" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="28" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ad6b8db87712c71951ab67e14182a29b7" prot="public" static="no">
        <name>ENABLE_PRESSURE</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="31" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="31" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a72262e754adf7baf244f9fa47c15e1d2" prot="public" static="no">
        <name>ENABLE_BT_DEBUG</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="32" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="32" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ab3935ba9b16dcda80eca9c91dc4a9a19" prot="public" static="no">
        <name>EXECUTE_EVERY_N_MS</name>
        <param><defname>MS</defname></param>
        <param><defname>X</defname></param>
        <initializer>  do {                                                                         \
    static volatile int64_t init = -1;                                         \
    if (init == -1) {                                                          \
      init = uxr_millis();                                                     \
    }                                                                          \
    if (uxr_millis() - init &gt; MS) {                                            \
      X;                                                                       \
      init = uxr_millis();                                                     \
    }                                                                          \
  } while (0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="34" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="34" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ad4455691936f92fdd6c37566fc58ba1f" prot="public" static="no">
        <name>BAUD_RATE</name>
        <initializer>6000000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="47" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="47" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1af605ad2cc80f8f9a7ded74009b24c6d5" prot="public" static="no">
        <name>CALLBACK_TOTAL</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="48" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="48" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a8b06d2e9648501088d9fcc2b3c714690" prot="public" static="no">
        <name>SYNC_TIMEOUT</name>
        <initializer>1000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="49" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="49" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a21c9a6dd50dac33eded62f5230da33e3" prot="public" static="no">
        <name>BT_MC_RX</name>
        <initializer>34</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="52" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="52" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1af5f126c36ffc52d539b232facd644531" prot="public" static="no">
        <name>BT_MC_TX</name>
        <initializer>35</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="53" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="53" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a54fb2e697d06412f1df1f246528f98db" prot="public" static="no">
        <name>SERVO_PIN1</name>
        <initializer>9</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="54" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="54" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a2358bf36e4130f9192ca22b04564bf78" prot="public" static="no">
        <name>SERVO_PIN2</name>
        <initializer>10</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="55" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="55" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1aa2844b520f3e69eb56edde7e6bdb8ee0" prot="public" static="no">
        <name>SERVO_PIN3</name>
        <initializer>11</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="56" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="56" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ac5a3ff6febcb0c6dbf98c74e8fff07f4" prot="public" static="no">
        <name>THRUSTER_PIN</name>
        <initializer>12</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="57" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="57" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ae7f6917411b54a5c51ba9baba7c70798" prot="public" static="no">
        <name>VOLT_PIN</name>
        <initializer>18</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="58" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="58" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a813d6b208edd662faa8b100b8e6b4369" prot="public" static="no">
        <name>CURRENT_PIN</name>
        <initializer>17</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="59" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="59" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a6767b1b87d2607586edac4ccc264a1ca" prot="public" static="no">
        <name>LEAK_PIN</name>
        <initializer>16</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="60" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="60" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ab4553be4db9860d940f81d7447173b2f" prot="public" static="no">
        <name>LED_PIN</name>
        <initializer>13</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="61" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="61" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ab9aa5b56d984e5fee1b12cdfce5265f5" prot="public" static="no">
        <name>DEFAULT_SERVO</name>
        <initializer>90</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="64" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="64" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a6c6eafa621ccb8e488cb2b90c38b9bb4" prot="public" static="no">
        <name>THRUSTER_OFF</name>
        <initializer>1500</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="65" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="65" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a78a73a2407c0d63cd1810dc4439bb344" prot="public" static="no">
        <name>SERVO_OUT_HIGH</name>
        <initializer>2500</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="68" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="68" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a84f683adc12593607818902c067443bf" prot="public" static="no">
        <name>SERVO_OUT_LOW</name>
        <initializer>500</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="69" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="69" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a4bef1bdab442f2f070157bb0d21f321c" prot="public" static="no">
        <name>THRUSTER_OUT_HIGH</name>
        <initializer>2000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="70" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="70" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1adda173dd4a2880eaa2832e6e8795cd11" prot="public" static="no">
        <name>THRUSTER_OUT_LOW</name>
        <initializer>1000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="71" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="71" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a86ab1083117316547bd3ffffcac49126" prot="public" static="no">
        <name>THRUSTER_IN_HIGH</name>
        <initializer>100</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="72" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="72" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a6577fea59e1409dfe839dc5742fb03f2" prot="public" static="no">
        <name>THRUSTER_IN_LOW</name>
        <initializer>-100</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="73" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="73" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1ae41566ad7730a2bd95ff58f839c43f6f" prot="public" static="no">
        <name>BT_DEBUG_RATE</name>
        <initializer>9600</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="76" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="76" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a487166e197ff871feae6f13dc63ec68c" prot="public" static="no">
        <name>I2C_RATE</name>
        <initializer>400000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="77" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="77" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1aee417ef99c9c3a59c7dd2e1112e7916b" prot="public" static="no">
        <name>BATTERY_MS</name>
        <initializer>1000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="80" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="80" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1a5bd07a795448af3f61f1f6de06463445" prot="public" static="no">
        <name>LEAK_MS</name>
        <initializer>1000</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="81" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="81" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="main_8cpp_1aff9a498fcc65172b5a88f268f4e6bdc8" prot="public" static="no">
        <name>PRESSURE_MS</name>
        <initializer>20</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="82" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="82" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="enum">
      <memberdef kind="enum" id="main_8cpp_1aa19be6305a5a4485e1e70de70ed7d677" prot="public" static="no" strong="no">
        <type></type>
        <name>states</name>
        <enumvalue id="main_8cpp_1aa19be6305a5a4485e1e70de70ed7d677a4b07b1c37e48ea6881eb449841444e1d" prot="public">
          <name>WAITING_AGENT</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="main_8cpp_1aa19be6305a5a4485e1e70de70ed7d677a8350504a9b42263345a187afc2a8f68e" prot="public">
          <name>AGENT_AVAILABLE</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="main_8cpp_1aa19be6305a5a4485e1e70de70ed7d677a086ba9293c4067ddc1011eb4dffde038" prot="public">
          <name>AGENT_CONNECTED</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="main_8cpp_1aa19be6305a5a4485e1e70de70ed7d677ac731163daa32a8b5dbbda4811a67fd1b" prot="public">
          <name>AGENT_DISCONNECTED</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="115" column="1" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="115" bodyend="120"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="main_8cpp_1a69715aba74526f43c76f3c4576d1d776" prot="public" static="no" mutable="no">
        <type>unsigned long</type>
        <definition>unsigned long last_received</definition>
        <argsstring></argsstring>
        <name>last_received</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="85" column="15" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="85" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1ad7ca784e9d6a36f1a990ccef47340149" prot="public" static="no" mutable="no">
        <type>rclc_support_t</type>
        <definition>rclc_support_t support</definition>
        <argsstring></argsstring>
        <name>support</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="88" column="16" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="88" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1acc1518bac7ff8bf75ac11589055d7578" prot="public" static="no" mutable="no">
        <type>rcl_allocator_t</type>
        <definition>rcl_allocator_t allocator</definition>
        <argsstring></argsstring>
        <name>allocator</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="89" column="17" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="89" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1ab69e3b0b5d335275c7e2da94c0886b1c" prot="public" static="no" mutable="no">
        <type>rcl_node_t</type>
        <definition>rcl_node_t node</definition>
        <argsstring></argsstring>
        <name>node</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="90" column="12" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="90" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1a864bc8f364fa8dd00b7265f7fd39ce84" prot="public" static="no" mutable="no">
        <type>rclc_executor_t</type>
        <definition>rclc_executor_t executor</definition>
        <argsstring></argsstring>
        <name>executor</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="91" column="17" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="91" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1adf673e6d48bde321870e7389d0fd3a2b" prot="public" static="no" mutable="no">
        <type>frost_interfaces__msg__UCommand</type>
        <definition>frost_interfaces__msg__UCommand command_msg</definition>
        <argsstring></argsstring>
        <name>command_msg</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="94" column="33" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="94" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1a38adf196df51513c6d7c15150e91c69d" prot="public" static="no" mutable="no">
        <type>rcl_subscription_t</type>
        <definition>rcl_subscription_t command_sub</definition>
        <argsstring></argsstring>
        <name>command_sub</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="97" column="20" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="97" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1ababf2ce58bfce2468b7dc38dce6493f7" prot="public" static="no" mutable="no">
        <type><ref refid="classBatteryPub" kindref="compound">BatteryPub</ref></type>
        <definition>BatteryPub battery_pub</definition>
        <argsstring></argsstring>
        <name>battery_pub</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="100" column="12" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="100" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1aafa81c979da110a109ca38521e8bb42e" prot="public" static="no" mutable="no">
        <type><ref refid="classLeakPub" kindref="compound">LeakPub</ref></type>
        <definition>LeakPub leak_pub</definition>
        <argsstring></argsstring>
        <name>leak_pub</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="101" column="9" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="101" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1a75ffc6c4c2d6702a3f379bf2513ac8e1" prot="public" static="no" mutable="no">
        <type><ref refid="classPressurePub" kindref="compound">PressurePub</ref></type>
        <definition>PressurePub pressure_pub</definition>
        <argsstring></argsstring>
        <name>pressure_pub</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="102" column="13" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="102" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1ad282831427871253f8f6b74232d5e425" prot="public" static="no" mutable="no">
        <type>MS5837</type>
        <definition>MS5837 myPressure</definition>
        <argsstring></argsstring>
        <name>myPressure</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="106" column="8" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="106" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1ac559bc920cd1ad5655c740616594b1b5" prot="public" static="no" mutable="no">
        <type>Servo</type>
        <definition>Servo myServo1</definition>
        <argsstring></argsstring>
        <name>myServo1</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="109" column="7" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="109" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1ac773ef935f8c08f2f6d2b5c358ecea29" prot="public" static="no" mutable="no">
        <type>Servo</type>
        <definition>Servo myServo2</definition>
        <argsstring></argsstring>
        <name>myServo2</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="110" column="7" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="110" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1ab232a7b77d64adaf0c683ca167311ab7" prot="public" static="no" mutable="no">
        <type>Servo</type>
        <definition>Servo myServo3</definition>
        <argsstring></argsstring>
        <name>myServo3</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="111" column="7" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="111" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1accdcea30823dd428e6aea6c4e8657ba6" prot="public" static="no" mutable="no">
        <type>Servo</type>
        <definition>Servo myThruster</definition>
        <argsstring></argsstring>
        <name>myThruster</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="112" column="7" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="112" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="main_8cpp_1aa56f777b40743798ee0726ba4ded17a9" prot="public" static="no" mutable="no">
        <type>enum states</type>
        <definition>enum states state</definition>
        <argsstring></argsstring>
        <name>state</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="120" column="14"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="main_8cpp_1affc39a1bb3628c29f361ce25b8460992" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>SoftwareSerial</type>
        <definition>SoftwareSerial BTSerial</definition>
        <argsstring>(34, 35)</argsstring>
        <name>BTSerial</name>
        <param>
          <type>34</type>
        </param>
        <param>
          <type>35</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="105" column="16" declfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" declline="105" declcolumn="16"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1a1ba932e26c7eb955eb2ad83e9f4adaf1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void error_loop</definition>
        <argsstring>()</argsstring>
        <name>error_loop</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="122" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="122" bodyend="130"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1a98ff7fd3dd310e11aac835bf0632b4bc" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void command_sub_callback</definition>
        <argsstring>(const void *command_msgin)</argsstring>
        <name>command_sub_callback</name>
        <param>
          <type>const void *</type>
          <declname>command_msgin</declname>
        </param>
        <briefdescription>
<para>Callback function for the control_command subscriber. This function is called whenever a new control command is received from the micro-ROS agent. The function updates the actuator positions based on the received command. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>command_msgin</parametername>
</parameternamelist>
<parameterdescription>
<para>The received control command </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="139" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="139" bodyend="164"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1a6ebcd257d8ca3d30c19a587407dcc007" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool create_entities</definition>
        <argsstring>()</argsstring>
        <name>create_entities</name>
        <briefdescription>
<para>Creates micro-ROS entities. This function initializes the micro-ROS entities (node, publishers, subscribers, and executor) and synchronizes the timestamps with the Raspberry Pi. </para>
        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>true if the entities were created successfully, false otherwise </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="173" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="173" bodyend="221"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1a6ec56d5719b6286a3f5fd83f5b26eddd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void destroy_entities</definition>
        <argsstring>()</argsstring>
        <name>destroy_entities</name>
        <briefdescription>
<para>Destroys micro-ROS entities. This function destroys the micro-ROS entities (node, publishers, subscribers, and executor). </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="227" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="227" bodyend="253"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1a4fc01d736fe50cf5b977f755b675f11d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void setup</definition>
        <argsstring>()</argsstring>
        <name>setup</name>
        <briefdescription>
<para>Sets up the micro-ROS serial transports. This function sets up the micro-ROS serial transports for communication with the Raspberry Pi. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="259" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="259" bodyend="337"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1aea35450bc9674e2b231d84e35a7f6c17" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void read_battery</definition>
        <argsstring>()</argsstring>
        <name>read_battery</name>
        <briefdescription>
<para>Reads the battery sensor data. This function reads the battery sensor data (voltage and current) and publishes it to the micro-ROS agent. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="343" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="343" bodyend="352"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1a1d49f4ddd16b1a0b5e16db4d173a93fa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void read_leak</definition>
        <argsstring>()</argsstring>
        <name>read_leak</name>
        <briefdescription>
<para>Reads the leak sensor data. This function reads the leak sensor data and publishes it to the micro-ROS agent. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="358" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="358" bodyend="364"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1aee2d2b4de37abd0aec9d441d54069678" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void read_pressure</definition>
        <argsstring>()</argsstring>
        <name>read_pressure</name>
        <briefdescription>
<para>Reads the pressure sensor data. This function reads the pressure sensor data and publishes it to the micro-ROS agent. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="370" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="370" bodyend="377"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1afe461d27b9c48d5921c00d521181f12f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void loop</definition>
        <argsstring>()</argsstring>
        <name>loop</name>
        <briefdescription>
<para>This function is the main loop for the micro-ROS node. It manages the connection and disconnection of the micro-ROS agent, actuator positions, and sensor data collection. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp" line="384" column="6" bodyfile="/home/frostlab/teensy_ws/cougars/src/main.cpp" bodystart="384" bodyend="463"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>This node is the micro-ROS node for the CougUV. It controls the actuators (servos and thruster) and reads the sensor data (battery, leak, and pressure). The node communicates with the Raspberry Pi over micro-ROS. </para>
    </briefdescription>
    <detaileddescription>
<para><simplesect kind="author"><para>Nelson Durrant </para>
</simplesect>
<simplesect kind="date"><para>September 2024</para>
</simplesect>
Subscribes:<itemizedlist>
<listitem><para>kinematics/command (frost_interfaces/msg/UCommand) Publishes:</para>
</listitem><listitem><para>battery_status (frost_interfaces/msg/BatteryStatus)</para>
</listitem><listitem><para>leak_status (frost_interfaces/msg/LeakStatus)</para>
</listitem><listitem><para>pressure_data (sensor_msgs/msg/FluidPressure) </para>
</listitem></itemizedlist>
</para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;battery_pub.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;leak_pub.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;pressure_pub.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Servo.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;SoftwareSerial.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Wire.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;frost_interfaces/msg/u_command.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ENABLE_SERVOS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ENABLE_THRUSTER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="comment">//<sp/>#define<sp/>ENABLE_BATTERY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="comment">//<sp/>#define<sp/>ENABLE_LEAK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ENABLE_PRESSURE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>EXECUTE_EVERY_N_MS(MS,<sp/>X)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="35"><highlight class="preprocessor"><sp/><sp/>do<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="36"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>static<sp/>volatile<sp/>int64_t<sp/>init<sp/>=<sp/>-1;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="37"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>if<sp/>(init<sp/>==<sp/>-1)<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="38"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>init<sp/>=<sp/>uxr_millis();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="39"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="40"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>if<sp/>(uxr_millis()<sp/>-<sp/>init<sp/>&gt;<sp/>MS)<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="41"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>X;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="42"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>init<sp/>=<sp/>uxr_millis();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="43"><highlight class="preprocessor"><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="44"><highlight class="preprocessor"><sp/><sp/>}<sp/>while<sp/>(0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="comment">//<sp/>micro-ROS<sp/>config<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BAUD_RATE<sp/>6000000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>CALLBACK_TOTAL<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SYNC_TIMEOUT<sp/>1000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="comment">//<sp/>hardware<sp/>pin<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BT_MC_RX<sp/>34</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BT_MC_TX<sp/>35</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SERVO_PIN1<sp/>9<sp/><sp/></highlight><highlight class="comment">//<sp/>top<sp/>fin</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SERVO_PIN2<sp/>10<sp/></highlight><highlight class="comment">//<sp/>right<sp/>fin,<sp/>from<sp/>front</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SERVO_PIN3<sp/>11<sp/></highlight><highlight class="comment">//<sp/>left<sp/>fin,<sp/>from<sp/>front</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>THRUSTER_PIN<sp/>12</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>VOLT_PIN<sp/>18</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>CURRENT_PIN<sp/>17</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LEAK_PIN<sp/>16</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LED_PIN<sp/>13</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="comment">//<sp/>default<sp/>actuator<sp/>positions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEFAULT_SERVO<sp/>90</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>THRUSTER_OFF<sp/>1500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight><highlight class="comment">//<sp/>actuator<sp/>conversion<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SERVO_OUT_HIGH<sp/>2500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SERVO_OUT_LOW<sp/>500</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>THRUSTER_OUT_HIGH<sp/>2000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>THRUSTER_OUT_LOW<sp/>1000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>THRUSTER_IN_HIGH<sp/>100</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>THRUSTER_IN_LOW<sp/>-100</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight><highlight class="comment">//<sp/>sensor<sp/>baud<sp/>rates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BT_DEBUG_RATE<sp/>9600</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>I2C_RATE<sp/>400000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="comment">//<sp/>sensor<sp/>update<sp/>rates</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BATTERY_MS<sp/>1000<sp/></highlight><highlight class="comment">//<sp/>arbitrary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LEAK_MS<sp/>1000<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>arbitrary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PRESSURE_MS<sp/>20<sp/><sp/></highlight><highlight class="comment">//<sp/>fastest<sp/>update<sp/>speed<sp/>is<sp/>50<sp/>Hz</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight><highlight class="comment">//<sp/>time<sp/>of<sp/>last<sp/>received<sp/>command<sp/>(used<sp/>as<sp/>a<sp/>fail<sp/>safe)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>last_received<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight><highlight class="comment">//<sp/>micro-ROS<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal">rclc_support_t<sp/>support;</highlight></codeline>
<codeline lineno="89"><highlight class="normal">rcl_allocator_t<sp/>allocator;</highlight></codeline>
<codeline lineno="90"><highlight class="normal">rcl_node_t<sp/>node;</highlight></codeline>
<codeline lineno="91"><highlight class="normal">rclc_executor_t<sp/>executor;</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight><highlight class="comment">//<sp/>message<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal">frost_interfaces__msg__UCommand<sp/>command_msg;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight><highlight class="comment">//<sp/>subscriber<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal">rcl_subscription_t<sp/>command_sub;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="comment">//<sp/>publisher<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><ref refid="classBatteryPub" kindref="compound">BatteryPub</ref><sp/>battery_pub;</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><ref refid="classLeakPub" kindref="compound">LeakPub</ref><sp/>leak_pub;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><ref refid="classPressurePub" kindref="compound">PressurePub</ref><sp/>pressure_pub;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="comment">//<sp/>sensor<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal">SoftwareSerial<sp/>BTSerial(BT_MC_RX,<sp/>BT_MC_TX);</highlight></codeline>
<codeline lineno="106"><highlight class="normal">MS5837<sp/>myPressure;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="comment">//<sp/>actuator<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal">Servo<sp/>myServo1;<sp/></highlight><highlight class="comment">//<sp/>top<sp/>fin</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal">Servo<sp/>myServo2;<sp/></highlight><highlight class="comment">//<sp/>right<sp/>fin,<sp/>from<sp/>front</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal">Servo<sp/>myServo3;<sp/></highlight><highlight class="comment">//<sp/>left<sp/>fin,<sp/>from<sp/>front</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal">Servo<sp/>myThruster;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight><highlight class="comment">//<sp/>states<sp/>for<sp/>state<sp/>machine<sp/>in<sp/>loop<sp/>function</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/>states<sp/>{</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/>WAITING_AGENT,</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/>AGENT_AVAILABLE,</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/>AGENT_CONNECTED,</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/>AGENT_DISCONNECTED</highlight></codeline>
<codeline lineno="120"><highlight class="normal">}<sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>state;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>error_loop()<sp/>{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(1)<sp/>{</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(100);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ERROR]<sp/>In<sp/>error<sp/>loop&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="130"><highlight class="normal">}</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1a98ff7fd3dd310e11aac835bf0632b4bc" kindref="member">command_sub_callback</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*command_msgin)<sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/>last_received<sp/>=<sp/>millis();</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>frost_interfaces__msg__UCommand<sp/>*command_msg<sp/>=</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>frost_interfaces__msg__UCommand<sp/>*)command_msgin;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_SERVOS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/>myServo1.write(command_msg-&gt;fin[0]<sp/>+<sp/>DEFAULT_SERVO);<sp/></highlight><highlight class="comment">//<sp/>top<sp/>fin</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/>myServo2.write(command_msg-&gt;fin[1]<sp/>+<sp/>DEFAULT_SERVO);<sp/></highlight><highlight class="comment">//<sp/>right<sp/>fin,<sp/>from<sp/>front</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/>myServo3.write(command_msg-&gt;fin[2]<sp/>+<sp/>DEFAULT_SERVO);<sp/></highlight><highlight class="comment">//<sp/>left<sp/>fin,<sp/>from<sp/>front</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ENABLE_SERVOS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_THRUSTER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>converted<sp/>=<sp/>map(command_msg-&gt;thruster,<sp/>THRUSTER_IN_LOW,<sp/>THRUSTER_IN_HIGH,</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>THRUSTER_OUT_LOW,<sp/>THRUSTER_OUT_HIGH);</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/>myThruster.writeMicroseconds(converted);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_THRUSTER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Command<sp/>Received:<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>String(command_msg-&gt;fin[0])<sp/>+</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>String(command_msg-&gt;fin[1])<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal"><sp/>+</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>String(command_msg-&gt;fin[2])<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal"><sp/>+</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>String(command_msg-&gt;thruster));</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal">}</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1a6ebcd257d8ca3d30c19a587407dcc007" kindref="member">create_entities</ref>()<sp/>{</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>allocator<sp/>object<sp/>wraps<sp/>the<sp/>dynamic<sp/>memory<sp/>allocation<sp/>and<sp/>deallocation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>methods<sp/>used<sp/>in<sp/>micro-ROS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/>allocator<sp/>=<sp/>rcl_get_default_allocator();</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/>RCCHECK(rclc_support_init(&amp;support,<sp/>0,<sp/>NULL,<sp/>&amp;allocator));</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/>RCCHECK(</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rclc_node_init_default(&amp;node,<sp/></highlight><highlight class="stringliteral">&quot;micro_ros_platformio_node&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,<sp/>&amp;support));</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>synchronize<sp/>timestamps<sp/>with<sp/>the<sp/>Raspberry<sp/>Pi</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>after<sp/>sync,<sp/>timing<sp/>should<sp/>be<sp/>able<sp/>to<sp/>be<sp/>accessed<sp/>with<sp/>&quot;rmw_uros_epoch&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>functions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/>RCCHECK(rmw_uros_sync_session(SYNC_TIMEOUT));</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!rmw_uros_epoch_synchronized())<sp/>{</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ERROR]<sp/>Could<sp/>not<sp/>synchronize<sp/>timestamps<sp/>with<sp/>agent&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Timestamps<sp/>synchronized<sp/>with<sp/>agent&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>publishers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/>battery_pub.<ref refid="classBatteryPub_1a1361e66ff663b7f5811e12e12b51c935" kindref="member">setup</ref>(node);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/>leak_pub.<ref refid="classLeakPub_1a90140205a1308064a69becd1bf9b2d59" kindref="member">setup</ref>(node);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/>pressure_pub.<ref refid="classPressurePub_1a8a327163f2bf2caba602b3695786cc93" kindref="member">setup</ref>(node);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>subscribers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/>RCCHECK(rclc_subscription_init_default(</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&amp;command_sub,<sp/>&amp;node,</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ROSIDL_GET_MSG_TYPE_SUPPORT(frost_interfaces,<sp/>msg,<sp/>UCommand),</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;kinematics/command&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>executor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/>RCSOFTCHECK(rclc_executor_init(&amp;executor,<sp/>&amp;support.context,<sp/>CALLBACK_TOTAL,</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;allocator));</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>add<sp/>callbacks<sp/>to<sp/>executor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/>RCSOFTCHECK(</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rclc_executor_add_subscription(&amp;executor,<sp/>&amp;command_sub,<sp/>&amp;command_msg,</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;<ref refid="main_8cpp_1a98ff7fd3dd310e11aac835bf0632b4bc" kindref="member">command_sub_callback</ref>,<sp/>ON_NEW_DATA));</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Micro-ROS<sp/>entities<sp/>created<sp/>successfully&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="221"><highlight class="normal">}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1a6ec56d5719b6286a3f5fd83f5b26eddd" kindref="member">destroy_entities</ref>()<sp/>{</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/>rmw_context_t<sp/>*rmw_context<sp/>=<sp/>rcl_context_get_rmw_context(&amp;support.context);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/>(void)rmw_uros_set_context_entity_destroy_session_timeout(rmw_context,<sp/>0);</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>destroy<sp/>publishers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/>battery_pub.<ref refid="classBatteryPub_1a26ae34a9146d37d7a2a1885ae0a97bed" kindref="member">destroy</ref>(node);</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/>leak_pub.<ref refid="classLeakPub_1a26ae34a9146d37d7a2a1885ae0a97bed" kindref="member">destroy</ref>(node);</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/>pressure_pub.<ref refid="classPressurePub_1a26ae34a9146d37d7a2a1885ae0a97bed" kindref="member">destroy</ref>(node);</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>destroy<sp/>everything<sp/>else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rcl_subscription_fini(&amp;command_sub,<sp/>&amp;node)<sp/>!=<sp/>RCL_RET_OK)<sp/>{</highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ERROR]<sp/>Failed<sp/>to<sp/>destroy<sp/>command_sub&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/>rclc_executor_fini(&amp;executor);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rcl_node_fini(&amp;node)<sp/>!=<sp/>RCL_RET_OK)<sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ERROR]<sp/>Failed<sp/>to<sp/>destroy<sp/>node&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/>rclc_support_fini(&amp;support);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Micro-ROS<sp/>entities<sp/>destroyed<sp/>successfully&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal">}</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1a4fc01d736fe50cf5b977f755b675f11d" kindref="member">setup</ref>()<sp/>{</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/>Serial.begin(BAUD_RATE);</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/>set_microros_serial_transports(Serial);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>up<sp/>the<sp/>indicator<sp/>light</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/>pinMode(LED_PIN,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>up<sp/>the<sp/>I2C</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/>Wire.begin();</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/>Wire.setClock(I2C_RATE);</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/>BTSerial.begin(BT_DEBUG_RATE);</highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT<sp/>DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_SERVOS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/>pinMode(SERVO_PIN1,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/>pinMode(SERVO_PIN2,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/>pinMode(SERVO_PIN3,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/>myServo1.attach(SERVO_PIN1,<sp/>SERVO_OUT_LOW,<sp/>SERVO_OUT_HIGH);</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/>myServo2.attach(SERVO_PIN2,<sp/>SERVO_OUT_LOW,<sp/>SERVO_OUT_HIGH);</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/>myServo3.attach(SERVO_PIN3,<sp/>SERVO_OUT_LOW,<sp/>SERVO_OUT_HIGH);</highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/>myServo1.write(DEFAULT_SERVO);</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/>myServo2.write(DEFAULT_SERVO);</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/>myServo3.write(DEFAULT_SERVO);</highlight></codeline>
<codeline lineno="287"><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Servos<sp/>enabled&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="290"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_SERVOS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_THRUSTER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/>pinMode(THRUSTER_PIN,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/>myThruster.attach(THRUSTER_PIN);</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/>myThruster.writeMicroseconds(THRUSTER_OFF);</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/>delay(7000);</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Thruster<sp/>enabled&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_THRUSTER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BATTERY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/>pinMode(CURRENT_PIN,<sp/>INPUT);</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/>pinMode(VOLT_PIN,<sp/>INPUT);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Battery<sp/>Sensor<sp/>enabled&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BATTERY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_LEAK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/>pinMode(LEAK_PIN,<sp/>INPUT);</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Leak<sp/>Sensor<sp/>enabled&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_LEAK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_PRESSURE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!myPressure.init())<sp/>{</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ERROR]<sp/>Could<sp/>not<sp/>connect<sp/>to<sp/>Pressure<sp/>Sensor<sp/>over<sp/>I2C&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(1000);</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/>BTSerial.println(</highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>Pressure<sp/>Sensor<sp/>enabled&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_PRESSURE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/>state<sp/>=<sp/>WAITING_AGENT;</highlight></codeline>
<codeline lineno="337"><highlight class="normal">}</highlight></codeline>
<codeline lineno="338"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1aea35450bc9674e2b231d84e35a7f6c17" kindref="member">read_battery</ref>()<sp/>{</highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>we<sp/>did<sp/>some<sp/>testing<sp/>to<sp/>determine<sp/>the<sp/>below<sp/>params,<sp/>but</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>it&apos;s<sp/>possible<sp/>they<sp/>are<sp/>not<sp/>completely<sp/>accurate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>voltage<sp/>=<sp/>(analogRead(VOLT_PIN)<sp/>*<sp/>0.03437)<sp/>+<sp/>0.68;</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>current<sp/>=<sp/>(analogRead(CURRENT_PIN)<sp/>*<sp/>0.122)<sp/>-<sp/>11.95;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>publish<sp/>the<sp/>battery<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/>battery_pub.<ref refid="classBatteryPub_1ab6e03ac84debea08d656881e2ff9c984" kindref="member">publish</ref>(voltage,<sp/>current);</highlight></codeline>
<codeline lineno="352"><highlight class="normal">}</highlight></codeline>
<codeline lineno="353"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1a1d49f4ddd16b1a0b5e16db4d173a93fa" kindref="member">read_leak</ref>()<sp/>{</highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>leak<sp/>=<sp/>digitalRead(LEAK_PIN);</highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>publish<sp/>the<sp/>leak<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/>leak_pub.<ref refid="classLeakPub_1a876c1530b82783640ee659f45d769dee" kindref="member">publish</ref>(leak);</highlight></codeline>
<codeline lineno="364"><highlight class="normal">}</highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1aee2d2b4de37abd0aec9d441d54069678" kindref="member">read_pressure</ref>()<sp/>{</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/>myPressure.read();</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>pressure<sp/>=<sp/>myPressure.pressure();</highlight></codeline>
<codeline lineno="374"><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>publish<sp/>the<sp/>pressure<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/>pressure_pub.<ref refid="classPressurePub_1a4462568a0d8d7330b5be13ffa0c58a8a" kindref="member">publish</ref>(pressure);</highlight></codeline>
<codeline lineno="377"><highlight class="normal">}</highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1afe461d27b9c48d5921c00d521181f12f" kindref="member">loop</ref>()<sp/>{</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>blink<sp/>the<sp/>indicator<sp/>light</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(millis()<sp/>%<sp/>1000<sp/>&lt;<sp/>250)<sp/>{</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(LED_PIN,<sp/>LOW);</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(LED_PIN,<sp/>HIGH);</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>fail<sp/>safe<sp/>for<sp/>agent<sp/>disconnect</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(millis()<sp/>-<sp/>last_received<sp/>&gt;<sp/>5000)<sp/>{</highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_SERVOS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>myServo1.write(DEFAULT_SERVO);</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/>myServo2.write(DEFAULT_SERVO);</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/>myServo3.write(DEFAULT_SERVO);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_SERVOS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_THRUSTER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/>myThruster.writeMicroseconds(THRUSTER_OFF);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_THRUSTER</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/>BTSerial.println(</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;[ALERT]<sp/>No<sp/>command<sp/>received<sp/>in<sp/>timeout,<sp/>stopping<sp/>actuators&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BT_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>state<sp/>machine<sp/>to<sp/>manage<sp/>connecting<sp/>and<sp/>disconnecting<sp/>the<sp/>micro-ROS<sp/>agent</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(state)<sp/>{</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>WAITING_AGENT:</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/>EXECUTE_EVERY_N_MS(500,<sp/>state<sp/>=<sp/>(RMW_RET_OK<sp/>==<sp/>rmw_uros_ping_agent(100,<sp/>1))</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>AGENT_AVAILABLE</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>WAITING_AGENT;);</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="419"><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>AGENT_AVAILABLE:</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/>state<sp/>=<sp/>(</highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>==<sp/><ref refid="main_8cpp_1a6ebcd257d8ca3d30c19a587407dcc007" kindref="member">create_entities</ref>())<sp/>?<sp/>AGENT_CONNECTED<sp/>:<sp/>WAITING_AGENT;</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(state<sp/>==<sp/>WAITING_AGENT)<sp/>{</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8cpp_1a6ec56d5719b6286a3f5fd83f5b26eddd" kindref="member">destroy_entities</ref>();</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>AGENT_CONNECTED:</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/>EXECUTE_EVERY_N_MS(200,<sp/>state<sp/>=<sp/>(RMW_RET_OK<sp/>==<sp/>rmw_uros_ping_agent(100,<sp/>1))</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/>AGENT_CONNECTED</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>AGENT_DISCONNECTED;);</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(state<sp/>==<sp/>AGENT_CONNECTED)<sp/>{</highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>EXECUTES<sp/>WHEN<sp/>THE<sp/>AGENT<sp/>IS<sp/>CONNECTED</highlight></codeline>
<codeline lineno="436"><highlight class="comment"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_BATTERY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>EXECUTE_EVERY_N_MS(BATTERY_MS,<sp/><ref refid="main_8cpp_1aea35450bc9674e2b231d84e35a7f6c17" kindref="member">read_battery</ref>());</highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_BATTERY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_LEAK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>EXECUTE_EVERY_N_MS(LEAK_MS,<sp/><ref refid="main_8cpp_1a1d49f4ddd16b1a0b5e16db4d173a93fa" kindref="member">read_leak</ref>());</highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_LEAK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>ENABLE_PRESSURE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>EXECUTE_EVERY_N_MS(PRESSURE_MS,<sp/><ref refid="main_8cpp_1aee2d2b4de37abd0aec9d441d54069678" kindref="member">read_pressure</ref>());</highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>ENABLE_PRESSURE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rclc_executor_spin_some(&amp;executor,<sp/>RCL_MS_TO_NS(100));</highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>AGENT_DISCONNECTED:</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="main_8cpp_1a6ec56d5719b6286a3f5fd83f5b26eddd" kindref="member">destroy_entities</ref>();</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/>state<sp/>=<sp/>WAITING_AGENT;</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="463"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/frostlab/teensy_ws/cougars/src/main.cpp"/>
  </compounddef>
</doxygen>
